# AstrBot 声骸评分插件 (astrbot\_plugin\_echoscore)

[](https://github.com/timetetng/astrbot_plugin_echoscore)

一个为 [AstrBot](https://github.com/AstrBotDevs/AstrBot) 设计的《鸣潮》声骸评分插件。它基于 loping151 的声骸识别评分API，让您可以通过发送截图，以指令或与大语言模型（LLM）对话的方式，快速为您的声骸进行评分。

## ✨ 致谢

本插件是基于 [**Loping151/ScoreEcho**](https://github.com/Loping151/ScoreEcho) 项目的 API 进行的二次开发，并适配了 AstrBot 框架。所有核心的图像识别与评分能力均由原作者提供。

在此向 [Loping151](https://github.com/Loping151) 的出色工作与无私分享表示诚挚的感谢！

## 🚀 功能特性

  - **截图评分**：发送游戏内声骸面板的截图即可获得评分结果图。
  - **双模式交互**：
    1.  **指令模式**：使用 `/评分` 等指令，精确控制评分角色、COST等参数。
    2.  **LLM 模式**：在与AI对话时，直接让它帮你为图片中的声骸评分，体验更自然。
  - **上下文图片支持**：支持处理单张、多张图片，也支持对聊天中回复（引用）的图片进行评分。
  - **简易配置**：通过 AstrBot 插件管理面板即可轻松配置所需的 API Token。

## 🔧 安装与配置

1.  **安装插件**：

      - 请从本仓库下载插件，并将其完整放置于 AstrBot 的 `data/plugins` 目录下。
      - 重启 AstrBot 以加载插件。

2.  **获取 Token**：

      - 此插件需要 `xwtoken` 才能访问评分API。请联系原作者 **小维 (loping151)** 申请你的 Token。

3.  **配置插件**：

      - 插件首次加载后，请进入 AstrBot 的 **WebUI \> 插件市场 \> astrbot\_plugin\_echoscore**。
      - 点击“管理”，在配置项中填入你申请到的 `xwtoken` 并保存。

## 📝 使用说明

配置完成后，您可以通过以下两种方式使用本插件：

### 方式一：指令调用

您可以通过发送指令或别名来触发评分。

  - **基础指令**: `评分`
  - **指令别名**: `score`, `echo`

**使用格式：**

```
/评分 [角色名] [Cost值] [主词条]
```

所有参数均为可选，插件会尝试从图片中自动识别。

**示例：**

1.  **自动识别**

      - 发送图片，并附上消息 `/评分`。
      - 或直接回复（引用）一张声骸截图，并发送 `/评分`。

2.  **指定参数** (当图片识别不清或想指定角色时)

      - 发送图片，并附上消息 `/评分 忌炎 4c`
      - 发送图片，并附上消息 `/评分 吟霖 4c 导电伤害`

### 方式二：LLM (大语言模型) 调用

使用具有工具调用能力的LLM模型，并在人格设置中启用`score_wuthering_waves_echo`工具的LLM对话时，可以直接通过自然语言让它为您评分。

**示例：**

1.  **直接请求**

    > **你**：（发送一张声骸截图）
    > **你**：帮我看一下这个声骸

2.  **结合角色请求**

    > **你**：（发送一张声骸截图）
    > **你**：看看这个卡提1c的评分

3.  **在回复中请求**

    > **你**：（回复一张别人发的声骸截图）
    > **你**：这张图的菲比4c怎么样？

LLM 会自动理解您的意图，返回评分图片并生成自然的对话。